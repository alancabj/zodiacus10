{"ast":null,"code":"import React,{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(()=>{const savedUser=localStorage.getItem('user');return savedUser?JSON.parse(savedUser):null;});const login=userData=>{setUser(userData);localStorage.setItem('user',JSON.stringify(userData));};const logout=()=>{setUser(null);localStorage.removeItem('user');localStorage.removeItem('token');};// Refrescar perfil desde backend\nconst refreshProfile=async()=>{const token=localStorage.getItem('token');if(!token)return;try{const res=await fetch('http://192.168.0.20:5001/api/auth/profile',{headers:{'Authorization':`Bearer ${token}`}});if(res.ok){const data=await res.json();setUser(data);localStorage.setItem('user',JSON.stringify(data));}}catch(error){console.error('Error refrescando perfil:',error);}};useEffect(()=>{refreshProfile();},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout,refreshProfile},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","savedUser","localStorage","getItem","JSON","parse","login","userData","setItem","stringify","logout","removeItem","refreshProfile","token","res","fetch","headers","ok","data","json","error","console","Provider","value"],"sources":["/Users/alanvivona/zodiacus10/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\n\nexport const AuthContext = createContext();\n\nexport const AuthProvider = ({ children }) => {\n  const [user, setUser] = useState(() => {\n    const savedUser = localStorage.getItem('user');\n    return savedUser ? JSON.parse(savedUser) : null;\n  });\n\n  const login = (userData) => {\n    setUser(userData);\n    localStorage.setItem('user', JSON.stringify(userData));\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('user');\n    localStorage.removeItem('token');\n  };\n\n  // Refrescar perfil desde backend\n  const refreshProfile = async () => {\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    try {\n      const res = await fetch('http://192.168.0.20:5001/api/auth/profile', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        }\n      });\n      if (res.ok) {\n        const data = await res.json();\n        setUser(data);\n        localStorage.setItem('user', JSON.stringify(data));\n      }\n    } catch (error) {\n      console.error('Error refrescando perfil:', error);\n    }\n  };\n\n  useEffect(() => {\n    refreshProfile();\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ user, login, logout, refreshProfile }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAElE,MAAO,MAAM,CAAAC,WAAW,cAAGL,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAM,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAM,CACrC,KAAM,CAAAU,SAAS,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC9C,MAAO,CAAAF,SAAS,CAAGG,IAAI,CAACC,KAAK,CAACJ,SAAS,CAAC,CAAG,IAAI,CACjD,CAAC,CAAC,CAEF,KAAM,CAAAK,KAAK,CAAIC,QAAQ,EAAK,CAC1BP,OAAO,CAACO,QAAQ,CAAC,CACjBL,YAAY,CAACM,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACF,QAAQ,CAAC,CAAC,CACxD,CAAC,CAED,KAAM,CAAAG,MAAM,CAAGA,CAAA,GAAM,CACnBV,OAAO,CAAC,IAAI,CAAC,CACbE,YAAY,CAACS,UAAU,CAAC,MAAM,CAAC,CAC/BT,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC,CAClC,CAAC,CAED;AACA,KAAM,CAAAC,cAAc,CAAG,KAAAA,CAAA,GAAY,CACjC,KAAM,CAAAC,KAAK,CAAGX,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACU,KAAK,CAAE,OAEZ,GAAI,CACF,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,2CAA2C,CAAE,CACnEC,OAAO,CAAE,CACP,eAAe,CAAE,UAAUH,KAAK,EAClC,CACF,CAAC,CAAC,CACF,GAAIC,GAAG,CAACG,EAAE,CAAE,CACV,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,GAAG,CAACK,IAAI,CAAC,CAAC,CAC7BnB,OAAO,CAACkB,IAAI,CAAC,CACbhB,YAAY,CAACM,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACS,IAAI,CAAC,CAAC,CACpD,CACF,CAAE,MAAOE,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACnD,CACF,CAAC,CAED5B,SAAS,CAAC,IAAM,CACdoB,cAAc,CAAC,CAAC,CAClB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACElB,IAAA,CAACC,WAAW,CAAC2B,QAAQ,EAACC,KAAK,CAAE,CAAExB,IAAI,CAAEO,KAAK,CAAEI,MAAM,CAAEE,cAAe,CAAE,CAAAd,QAAA,CAClEA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}