{"ast":null,"code":"var _jsxFileName = \"/Users/alanvivona/zodiacus10/src/screens/ZodiacRouletteRoom.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useMemo, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport ChatRoom from '../components/ChatRoom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_SERVER_URL = 'http://localhost:5001';\nconst signosEmoji = {\n  aries: '♈',\n  tauro: '♉',\n  geminis: '♊',\n  cancer: '♋',\n  leo: '♌',\n  virgo: '♍',\n  libra: '♎',\n  escorpio: '♏',\n  sagitario: '♐',\n  capricornio: '♑',\n  acuario: '♒',\n  piscis: '♓'\n};\nconst ZodiacRouletteRoom = () => {\n  _s();\n  const [partner, setPartner] = useState(null);\n  const [room, setRoom] = useState(null);\n  const [waiting, setWaiting] = useState(true);\n  const socketRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const storedUser = JSON.parse(localStorage.getItem('user'));\n    const token = localStorage.getItem('token');\n    if (!storedUser || !token) return;\n    socketRef.current = io(SOCKET_SERVER_URL, {\n      auth: {\n        token\n      }\n    });\n    socketRef.current.emit('joinRoulette', storedUser);\n    socketRef.current.on('roulettePartner', data => {\n      setPartner(data);\n      setRoom(data.room);\n      setWaiting(false);\n    });\n    socketRef.current.on('waitingPartner', () => {\n      setWaiting(true);\n      setPartner(null);\n      setRoom(null);\n    });\n    return () => {\n      socketRef.current.disconnect();\n      setPartner(null);\n      setRoom(null);\n      setWaiting(true);\n    };\n  }, []);\n  const handleBack = () => {\n    navigate(-1);\n  };\n  const partnerWithExtras = useMemo(() => {\n    if (!partner) return null;\n    const cleanSign = (partner.zodiacSign || '').toLowerCase().normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n    return {\n      ...partner,\n      emoji: signosEmoji[cleanSign] || ''\n    };\n  }, [partner]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      position: 'relative',\n      minHeight: '100vh',\n      backgroundColor: '#1a001a'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleBack,\n      style: {\n        position: 'absolute',\n        top: 20,\n        left: 20,\n        backgroundColor: '#DAA520',\n        color: '#4B0082',\n        border: 'none',\n        borderRadius: 8,\n        padding: '10px 15px',\n        fontWeight: 'bold',\n        cursor: 'pointer',\n        zIndex: 10\n      },\n      children: \"\\u2190 Volver\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        color: '#DAA520',\n        textAlign: 'center',\n        marginBottom: 20\n      },\n      children: \"\\uD83C\\uDFB2 Ruleta Zodiacal \\uD83D\\uDD2E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), waiting && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'rgba(0, 0, 0, 0.5)',\n        color: '#fff',\n        padding: 20,\n        borderRadius: 12,\n        maxWidth: 500,\n        margin: '40px auto',\n        textAlign: 'center',\n        boxShadow: '0 4px 12px rgba(0,0,0,0.3)'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          color: '#DAA520'\n        },\n        children: \"Buscando usuario...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Ser\\xE1s emparejado aleatoriamente con otro usuario para chatear.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), !waiting && partnerWithExtras && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: 'rgba(0, 0, 0, 0.45)',\n        padding: '10px 15px',\n        borderRadius: 10,\n        color: '#fff',\n        maxWidth: 300,\n        margin: '20px auto',\n        display: 'flex',\n        alignItems: 'center',\n        gap: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: partnerWithExtras.photoPath || '/default-profile.png',\n        alt: `${partnerWithExtras.fullName} foto`,\n        style: {\n          width: 40,\n          height: 40,\n          borderRadius: '50%',\n          border: '2px solid #DAA520',\n          objectFit: 'cover'\n        },\n        onError: e => {\n          e.currentTarget.src = '/default-profile.png';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: '1.5rem'\n        },\n        children: partnerWithExtras.emoji\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontWeight: 'bold',\n          fontSize: '1.2rem'\n        },\n        children: partnerWithExtras.fullName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), !waiting && room && /*#__PURE__*/_jsxDEV(ChatRoom, {\n      room: room\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n_s(ZodiacRouletteRoom, \"YEtbP7AmhCUrPFLsPcjKplF/LRo=\", false, function () {\n  return [useNavigate];\n});\n_c = ZodiacRouletteRoom;\nexport default ZodiacRouletteRoom;\nvar _c;\n$RefreshReg$(_c, \"ZodiacRouletteRoom\");","map":{"version":3,"names":["React","useEffect","useState","useMemo","useRef","io","useNavigate","ChatRoom","jsxDEV","_jsxDEV","SOCKET_SERVER_URL","signosEmoji","aries","tauro","geminis","cancer","leo","virgo","libra","escorpio","sagitario","capricornio","acuario","piscis","ZodiacRouletteRoom","_s","partner","setPartner","room","setRoom","waiting","setWaiting","socketRef","navigate","storedUser","JSON","parse","localStorage","getItem","token","current","auth","emit","on","data","disconnect","handleBack","partnerWithExtras","cleanSign","zodiacSign","toLowerCase","normalize","replace","emoji","style","padding","position","minHeight","backgroundColor","children","onClick","top","left","color","border","borderRadius","fontWeight","cursor","zIndex","fileName","_jsxFileName","lineNumber","columnNumber","textAlign","marginBottom","maxWidth","margin","boxShadow","display","alignItems","gap","src","photoPath","alt","fullName","width","height","objectFit","onError","e","currentTarget","fontSize","_c","$RefreshReg$"],"sources":["/Users/alanvivona/zodiacus10/src/screens/ZodiacRouletteRoom.jsx"],"sourcesContent":["import React, { useEffect, useState, useMemo, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { useNavigate } from 'react-router-dom';\nimport ChatRoom from '../components/ChatRoom';\n\nconst SOCKET_SERVER_URL = 'http://localhost:5001';\n\nconst signosEmoji = {\n  aries: '♈', tauro: '♉', geminis: '♊', cancer: '♋', leo: '♌',\n  virgo: '♍', libra: '♎', escorpio: '♏', sagitario: '♐',\n  capricornio: '♑', acuario: '♒', piscis: '♓'\n};\n\nconst ZodiacRouletteRoom = () => {\n  const [partner, setPartner] = useState(null);\n  const [room, setRoom] = useState(null);\n  const [waiting, setWaiting] = useState(true);\n  const socketRef = useRef(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const storedUser = JSON.parse(localStorage.getItem('user'));\n    const token = localStorage.getItem('token');\n    if (!storedUser || !token) return;\n\n    socketRef.current = io(SOCKET_SERVER_URL, { auth: { token } });\n\n    socketRef.current.emit('joinRoulette', storedUser);\n\n    socketRef.current.on('roulettePartner', (data) => {\n      setPartner(data);\n      setRoom(data.room);\n      setWaiting(false);\n    });\n\n    socketRef.current.on('waitingPartner', () => {\n      setWaiting(true);\n      setPartner(null);\n      setRoom(null);\n    });\n\n    return () => {\n      socketRef.current.disconnect();\n      setPartner(null);\n      setRoom(null);\n      setWaiting(true);\n    };\n  }, []);\n\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  const partnerWithExtras = useMemo(() => {\n    if (!partner) return null;\n    const cleanSign = (partner.zodiacSign || '')\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '');\n\n    return {\n      ...partner,\n      emoji: signosEmoji[cleanSign] || '',\n    };\n  }, [partner]);\n\n  return (\n    <div style={{ padding: 20, position: 'relative', minHeight: '100vh', backgroundColor: '#1a001a' }}>\n      <button\n        onClick={handleBack}\n        style={{\n          position: 'absolute',\n          top: 20,\n          left: 20,\n          backgroundColor: '#DAA520',\n          color: '#4B0082',\n          border: 'none',\n          borderRadius: 8,\n          padding: '10px 15px',\n          fontWeight: 'bold',\n          cursor: 'pointer',\n          zIndex: 10,\n        }}\n      >\n        ← Volver\n      </button>\n\n      <h2 style={{ color: '#DAA520', textAlign: 'center', marginBottom: 20 }}>\n        🎲 Ruleta Zodiacal 🔮\n      </h2>\n\n      {waiting && (\n        <div style={{\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\n          color: '#fff',\n          padding: 20,\n          borderRadius: 12,\n          maxWidth: 500,\n          margin: '40px auto',\n          textAlign: 'center',\n          boxShadow: '0 4px 12px rgba(0,0,0,0.3)',\n        }}>\n          <h3 style={{ color: '#DAA520' }}>Buscando usuario...</h3>\n          <p>Serás emparejado aleatoriamente con otro usuario para chatear.</p>\n        </div>\n      )}\n\n      {!waiting && partnerWithExtras && (\n        <div style={{\n          backgroundColor: 'rgba(0, 0, 0, 0.45)',\n          padding: '10px 15px',\n          borderRadius: 10,\n          color: '#fff',\n          maxWidth: 300,\n          margin: '20px auto',\n          display: 'flex',\n          alignItems: 'center',\n          gap: 10,\n        }}>\n          <img\n            src={partnerWithExtras.photoPath || '/default-profile.png'}\n            alt={`${partnerWithExtras.fullName} foto`}\n            style={{ width: 40, height: 40, borderRadius: '50%', border: '2px solid #DAA520', objectFit: 'cover' }}\n            onError={(e) => { e.currentTarget.src = '/default-profile.png'; }}\n          />\n          <span style={{ fontSize: '1.5rem' }}>{partnerWithExtras.emoji}</span>\n          <span style={{ fontWeight: 'bold', fontSize: '1.2rem' }}>{partnerWithExtras.fullName}</span>\n        </div>\n      )}\n\n      {!waiting && room && (\n        <ChatRoom room={room} />\n      )}\n    </div>\n  );\n};\n\nexport default ZodiacRouletteRoom;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}